<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FITCODE</title>
    <link rel="icon" href="/logo_color.ico" type="image/x-icon">
    <link rel="stylesheet" href="./src/styles/style.css" />
    <link rel="stylesheet" href="./src/styles/loginStyle.css" />
    <link rel="stylesheet" href="./src/styles/cardInfoStyle.css" />
    <link rel="stylesheet" href="./src/styles/cardActivity.css" />
    <link rel="stylesheet" href="./src/styles/cardQuickAction.css" />
    <link rel="stylesheet" href="./src/styles/cardNextSession.css" />
    <link rel="stylesheet" href="./src/styles/cardPlan.css" />
    <link rel="stylesheet" href="./src/styles/cardAssignment.css" />
    <link rel="stylesheet" href="./src/styles/plan.css" />
    <link rel="stylesheet" href="./src/styles/assignment.css" />
    <link rel="stylesheet" href="./src/styles/modalPlanDetail.css" />
    <link rel="stylesheet" href="./src/styles/modalPlanNew.css" />
    <link rel="stylesheet" href="./src/styles/modalAssignmentNew.css" />
    <link rel="stylesheet" href="./src/styles/comboBox.css" />
    <link rel="stylesheet" href="./src/styles/switch.css" />
    <link rel="stylesheet" href="./src/styles/datePicker.css" />
    <link rel="stylesheet" href="./fonts/Material-Symbols-Outlined.woff2" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" />
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<style>
    /*
    .fade-in {
        animation: fadeIn 0.15s ease-out forwards;
    }

    .fade-out {
        animation: fadeOut 0.15s ease-in forwards;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: scale(0.95);
        }

        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    @keyframes fadeOut {
        from {
            opacity: 1;
            transform: scale(1);
        }

        to {
            opacity: 0;
            transform: scale(0.95);
        }
    }*/
</style>

<body>
    <div id="fitcode1">



        <button onclick="openAssignmentNewModal()">Ver Detalle del Plan</button>

        <!--
        <div class="relative w-64">
                <label class="text-gray-700 font-medium">Fecha</label>

                
                <input id="dateInput" type="text" readonly placeholder="Seleccionar fecha..." class="w-full mt-1 px-4 py-2 border border-gray-300 rounded-xl shadow-sm cursor-pointer
             focus:outline-none focus:ring-2 focus:ring-blue-500">

                
                <div id="calendar"
                    class="absolute mt-2 left-0 w-full bg-white border border-gray-300 rounded-xl shadow-xl hidden z-20">

                    
                    <div class="flex items-center justify-between px-3 py-2 border-b">
                        <button id="prevMonth" class="px-2 py-1 rounded hover:bg-gray-200">←</button>
                        <div id="monthLabel" class="font-semibold"></div>
                        <button id="nextMonth" class="px-2 py-1 rounded hover:bg-gray-200">→</button>
                    </div>

                    
                    <div class="grid grid-cols-7 text-center text-gray-500 text-sm py-2">
                        <div>L</div>
                        <div>M</div>
                        <div>M</div>
                        <div>J</div>
                        <div>V</div>
                        <div>S</div>
                        <div>D</div>
                    </div>

                    <div id="days" class="grid grid-cols-7 text-center px-2 pb-2">
                    </div>
                </div>
            </div>
        -->


        <div class="date-range-picker" data-picker-range>
            <input type="text" class="input-start w-full p-2 border rounded" placeholder="Fecha inicio" readonly>
            <input type="text" class="input-end w-full p-2 border rounded mt-2" placeholder="Fecha fin" readonly>

            <div class="calendar hidden opacity-0 transition-opacity duration-200 mt-2 bg-white shadow rounded-xl p-4">
                <div class="flex items-center justify-between mb-3">
                    <button class="prev-month px-2 py-1 rounded hover:bg-gray-200">‹</button>
                    <span class="month-label font-semibold"></span>
                    <button class="next-month px-2 py-1 rounded hover:bg-gray-200">›</button>
                </div>

                <div class="grid grid-cols-7 text-center font-semibold text-gray-500 mb-1 text-sm">
                    <span>L</span><span>M</span><span>M</span><span>J</span><span>V</span><span>S</span><span>D</span>
                </div>

                <div class="days-month grid grid-cols-7 gap-1 text-center"></div>
            </div>
        </div>







        <script>
            /*const input = document.getElementById("input-date");
            const calendar = document.getElementById("calendar");
            const daysContainer = document.getElementById("days-month");
            const monthLabel = document.getElementById("month-label");
            const prevBtn = document.getElementById("prev-month");
            const nextBtn = document.getElementById("next-month");

            let currentDate = new Date();


            const openCalendar = () => {
                calendar.classList.remove("hidden", "fade-out");
                calendar.classList.add("fade-in");
            };

            const closeCalendar = () => {
                calendar.classList.remove("fade-in");
                calendar.classList.add("fade-out");
                setTimeout(() => calendar.classList.add("hidden"), 150);
            };

            function renderCalendar() {
                daysContainer.innerHTML = "";

                const year = currentDate.getFullYear();
                const month = currentDate.getMonth();

                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);

                const startIndex = (firstDay.getDay() + 6) % 7;

                monthLabel.textContent = currentDate.toLocaleString("es-ES", {
                    month: "long",
                    year: "numeric"
                });

                for (let i = 0; i < startIndex; i++) {
                    const empty = document.createElement("div");
                    daysContainer.appendChild(empty);
                }

                for (let d = 1; d <= lastDay.getDate(); d++) {
                    const dayEl = document.createElement("div");
                    dayEl.textContent = d;
                    dayEl.className =
                        "day-of-month py-2 cursor-pointer rounded select-none";

                    dayEl.addEventListener("click", () => {
                        input.value = `${d}/${month + 1}/${year}`;
                        closeCalendar();
                    });

                    daysContainer.appendChild(dayEl);
                }
            }


            prevBtn.onclick = () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar();
            };
            nextBtn.onclick = () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar();
            };


            input.addEventListener("click", (e) => {
                e.stopPropagation();
                openCalendar();
                renderCalendar();
            });

 
            document.addEventListener("click", (e) => {
                if (!calendar.contains(e.target) && e.target !== input) {
                    closeCalendar();
                }
            });*/



            document.querySelectorAll("[data-picker-range]").forEach(initRangePicker);

            function initRangePicker(wrapper) {
                const inputStart = wrapper.querySelector(".input-start");
                const inputEnd = wrapper.querySelector(".input-end");
                const calendar = wrapper.querySelector(".calendar");
                const daysContainer = wrapper.querySelector(".days-month");
                const monthLabel = wrapper.querySelector(".month-label");
                const prevBtn = wrapper.querySelector(".prev-month");
                const nextBtn = wrapper.querySelector(".next-month");

                // Opcionales: rango permitido
                const minDate = null;           // new Date(2025, 0, 1)
                const maxDate = null;           // new Date(2025, 11, 31)

                let currentDate = new Date();
                let startDate = null;
                let endDate = null;
                let selectingStart = true;

                // ----- Abrir y cerrar -----
                const openCalendar = () => {
                    calendar.classList.remove("hidden", "fade-out");
                    calendar.classList.add("fade-in");
                };

                const closeCalendar = () => {
                    calendar.classList.remove("fade-in");
                    calendar.classList.add("fade-out");
                    setTimeout(() => calendar.classList.add("hidden"), 150);
                };

                // ----- Render del calendario -----
                function renderCalendar() {
                    daysContainer.innerHTML = "";

                    const year = currentDate.getFullYear();
                    const month = currentDate.getMonth();
                    const firstDay = new Date(year, month, 1);
                    const lastDay = new Date(year, month + 1, 0);

                    const startIndex = (firstDay.getDay() + 6) % 7;

                    monthLabel.textContent = currentDate.toLocaleString("es-ES", {
                        month: "long",
                        year: "numeric",
                    });

                    // Espacios vacíos
                    for (let i = 0; i < startIndex; i++)
                        daysContainer.appendChild(document.createElement("div"));

                    // Crear días
                    for (let d = 1; d <= lastDay.getDate(); d++) {
                        const dateObj = new Date(year, month, d);
                        const dayEl = document.createElement("div");

                        // Deshabilitar por rango min/max
                        const disabled =
                            (minDate && dateObj < minDate) ||
                            (maxDate && dateObj > maxDate);

                        dayEl.textContent = d;
                        dayEl.className =
                            "py-1 rounded cursor-pointer select-none text-sm transition";

                        if (disabled) {
                            dayEl.classList.add("opacity-40", "cursor-not-allowed");
                        } else {
                            dayEl.classList.add("hover:bg-blue-100");
                        }

                        // Detectar selección
                        if (startDate && dateObj.toDateString() === startDate?.toDateString()) {
                            dayEl.classList.add("bg-blue-500", "text-white");
                        }

                        if (endDate && dateObj.toDateString() === endDate?.toDateString()) {
                            dayEl.classList.add("bg-blue-500", "text-white");
                        }

                        // Rango visual intermedio
                        if (
                            startDate && endDate &&
                            dateObj > startDate &&
                            dateObj < endDate
                        ) {
                            dayEl.classList.add("bg-blue-200");
                        }

                        // Click
                        if (!disabled) {
                            dayEl.addEventListener("click", () => {
                                if (selectingStart) {
                                    startDate = dateObj;
                                    endDate = null;
                                    selectingStart = false;
                                } else {
                                    if (dateObj < startDate) {
                                        // Si la fecha fin es menor a la inicio → intercambia
                                        endDate = startDate;
                                        startDate = dateObj;
                                    } else {
                                        endDate = dateObj;
                                    }
                                    selectingStart = true;
                                    closeCalendar();
                                }

                                updateInputs();
                                renderCalendar();
                            });
                        }

                        daysContainer.appendChild(dayEl);
                    }
                }

                // ----- Actualizar inputs -----
                function updateInputs() {
                    const format = (d) =>
                        `${d.getDate()}/${d.getMonth() + 1}/${d.getFullYear()}`;

                    inputStart.value = startDate ? format(startDate) : "";
                    inputEnd.value = endDate ? format(endDate) : "";
                }

                // Navegación meses
                prevBtn.onclick = () => {
                    currentDate.setMonth(currentDate.getMonth() - 1);
                    renderCalendar();
                };

                nextBtn.onclick = () => {
                    currentDate.setMonth(currentDate.getMonth() + 1);
                    renderCalendar();
                };

                // Abrir
                inputStart.addEventListener("click", (e) => {
                    selectingStart = true;
                    e.stopPropagation();
                    openCalendar();
                    renderCalendar();
                });

                inputEnd.addEventListener("click", (e) => {
                    selectingStart = false;
                    e.stopPropagation();
                    openCalendar();
                    renderCalendar();
                });

                // Cerrar si se hace click afuera
                document.addEventListener("click", (e) => {
                    if (!calendar.contains(e.target) && !wrapper.contains(e.target)) {
                        closeCalendar();
                    }
                });
            }



        </script>

        <script>
            function openAssignmentNewModal() {
                //modalPlansDetailRender(plan);
                const overlay = document.getElementById('modal-overlay-assignment-new');
                const modal = document.getElementById('modal-assignment-new');

                overlay.style.display = 'flex';
                modal.classList.remove('modal-assignment-new-exit');
                modal.classList.add('modal-assignment-new-enter');

            }

            function closeAssignmentNewModal() {
                const overlay = document.getElementById('modal-overlay-assignment-new');
                const modal = document.getElementById('modal-assignment-new');

                modal.classList.remove('modal-assignment-new-enter');
                modal.classList.add('modal-assignment-new-exit');
                setTimeout(() => { overlay.style.display = 'none'; }, 250);
            }
        </script>
        <script src="./src/views/login.js" type="module"></script>
        <script src="./src/views/index.js" type="module"></script>
        <script src="./src/views/sidebar.js" type="module"></script>
        <script src="./src/views/mainContent.js" type="module"></script>
</body>

</html>